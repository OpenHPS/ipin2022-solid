"use strict";(self["webpackChunkipin2022_geolocationapi"]=self["webpackChunkipin2022_geolocationapi"]||[]).push([[347],{39347:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var s=t(3704),r=t(25108);const o=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),a=4017,i=799,c=3406,l=2276,f=1567,h=3784,u=5793,m=2896;function b(e,n){let t=0;const s=[];let r=16;while(r>0&&!e[r-1])--r;s.push({children:[],index:0});let o,a=s[0];for(let i=0;i<r;i++){for(let r=0;r<e[i];r++){a=s.pop(),a.children[a.index]=n[t];while(a.index>0)a=s.pop();a.index++,s.push(a);while(s.length<=i)s.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o;t++}i+1<r&&(s.push(o={children:[],index:0}),a.children[a.index]=o.children,a=o)}return s[0].children}function d(e,n,t,s,r,a,i,c,l){const{mcusPerLine:f,progressive:h}=t,u=n;let m=n,b=0,d=0;function p(){if(d>0)return d--,b>>d&1;if(b=e[m++],255===b){const n=e[m++];if(n)throw new Error(`unexpected marker: ${(b<<8|n).toString(16)}`)}return d=7,b>>>7}function w(e){let n,t=e;while(null!==(n=p())){if(t=t[n],"number"===typeof t)return t;if("object"!==typeof t)throw new Error("invalid huffman sequence")}return null}function k(e){let n=e,t=0;while(n>0){const e=p();if(null===e)return;t=t<<1|e,--n}return t}function C(e){const n=k(e);return n>=1<<e-1?n:n+(-1<<e)+1}function g(e,n){const t=w(e.huffmanTableDC),s=0===t?0:C(t);e.pred+=s,n[0]=e.pred;let r=1;while(r<64){const t=w(e.huffmanTableAC),s=15&t,a=t>>4;if(0===s){if(a<15)break;r+=16}else{r+=a;const e=o[r];n[e]=C(s),r++}}}function y(e,n){const t=w(e.huffmanTableDC),s=0===t?0:C(t)<<l;e.pred+=s,n[0]=e.pred}function P(e,n){n[0]|=p()<<l}let T=0;function v(e,n){if(T>0)return void T--;let t=a;const s=i;while(t<=s){const s=w(e.huffmanTableAC),r=15&s,a=s>>4;if(0===r){if(a<15){T=k(a)+(1<<a)-1;break}t+=16}else{t+=a;const e=o[t];n[e]=C(r)*(1<<l),t++}}}let x,A=0;function L(e,n){let t=a;const s=i;let r=0;while(t<=s){const s=o[t],a=n[s]<0?-1:1;switch(A){case 0:{const n=w(e.huffmanTableAC),t=15&n;if(r=n>>4,0===t)r<15?(T=k(r)+(1<<r),A=4):(r=16,A=1);else{if(1!==t)throw new Error("invalid ACn encoding");x=C(t),A=r?2:3}continue}case 1:case 2:n[s]?n[s]+=(p()<<l)*a:(r--,0===r&&(A=2===A?3:0));break;case 3:n[s]?n[s]+=(p()<<l)*a:(n[s]=x<<l,A=0);break;case 4:n[s]&&(n[s]+=(p()<<l)*a);break;default:break}t++}4===A&&(T--,0===T&&(A=0))}function E(e,n,t,s,r){const o=t/f|0,a=t%f,i=o*e.v+s,c=a*e.h+r;n(e,e.blocks[i][c])}function D(e,n,t){const s=t/e.blocksPerLine|0,r=t%e.blocksPerLine;n(e,e.blocks[s][r])}const I=s.length;let q,z,O,U,M,j;j=h?0===a?0===c?y:P:0===c?v:L:g;let F,G,H=0;G=1===I?s[0].blocksPerLine*s[0].blocksPerColumn:f*t.mcusPerColumn;const J=r||G;while(H<G){for(z=0;z<I;z++)s[z].pred=0;if(T=0,1===I)for(q=s[0],M=0;M<J;M++)D(q,j,H),H++;else for(M=0;M<J;M++){for(z=0;z<I;z++){q=s[z];const{h:e,v:n}=q;for(O=0;O<n;O++)for(U=0;U<e;U++)E(q,j,H,O,U)}if(H++,H===G)break}if(d=0,F=e[m]<<8|e[m+1],F<65280)throw new Error("marker was not found");if(!(F>=65488&&F<=65495))break;m+=2}return m-u}function p(e,n){const t=[],{blocksPerLine:s,blocksPerColumn:r}=n,o=s<<3,b=new Int32Array(64),d=new Uint8Array(64);function p(e,t,s){const r=n.quantizationTable;let o,b,d,p,w,k,C,g,y;const P=s;let T;for(T=0;T<64;T++)P[T]=e[T]*r[T];for(T=0;T<8;++T){const e=8*T;0!==P[1+e]||0!==P[2+e]||0!==P[3+e]||0!==P[4+e]||0!==P[5+e]||0!==P[6+e]||0!==P[7+e]?(o=u*P[0+e]+128>>8,b=u*P[4+e]+128>>8,d=P[2+e],p=P[6+e],w=m*(P[1+e]-P[7+e])+128>>8,g=m*(P[1+e]+P[7+e])+128>>8,k=P[3+e]<<4,C=P[5+e]<<4,y=o-b+1>>1,o=o+b+1>>1,b=y,y=d*h+p*f+128>>8,d=d*f-p*h+128>>8,p=y,y=w-C+1>>1,w=w+C+1>>1,C=y,y=g+k+1>>1,k=g-k+1>>1,g=y,y=o-p+1>>1,o=o+p+1>>1,p=y,y=b-d+1>>1,b=b+d+1>>1,d=y,y=w*l+g*c+2048>>12,w=w*c-g*l+2048>>12,g=y,y=k*i+C*a+2048>>12,k=k*a-C*i+2048>>12,C=y,P[0+e]=o+g,P[7+e]=o-g,P[1+e]=b+C,P[6+e]=b-C,P[2+e]=d+k,P[5+e]=d-k,P[3+e]=p+w,P[4+e]=p-w):(y=u*P[0+e]+512>>10,P[0+e]=y,P[1+e]=y,P[2+e]=y,P[3+e]=y,P[4+e]=y,P[5+e]=y,P[6+e]=y,P[7+e]=y)}for(T=0;T<8;++T){const e=T;0!==P[8+e]||0!==P[16+e]||0!==P[24+e]||0!==P[32+e]||0!==P[40+e]||0!==P[48+e]||0!==P[56+e]?(o=u*P[0+e]+2048>>12,b=u*P[32+e]+2048>>12,d=P[16+e],p=P[48+e],w=m*(P[8+e]-P[56+e])+2048>>12,g=m*(P[8+e]+P[56+e])+2048>>12,k=P[24+e],C=P[40+e],y=o-b+1>>1,o=o+b+1>>1,b=y,y=d*h+p*f+2048>>12,d=d*f-p*h+2048>>12,p=y,y=w-C+1>>1,w=w+C+1>>1,C=y,y=g+k+1>>1,k=g-k+1>>1,g=y,y=o-p+1>>1,o=o+p+1>>1,p=y,y=b-d+1>>1,b=b+d+1>>1,d=y,y=w*l+g*c+2048>>12,w=w*c-g*l+2048>>12,g=y,y=k*i+C*a+2048>>12,k=k*a-C*i+2048>>12,C=y,P[0+e]=o+g,P[56+e]=o-g,P[8+e]=b+C,P[48+e]=b-C,P[16+e]=d+k,P[40+e]=d-k,P[24+e]=p+w,P[32+e]=p-w):(y=u*s[T+0]+8192>>14,P[0+e]=y,P[8+e]=y,P[16+e]=y,P[24+e]=y,P[32+e]=y,P[40+e]=y,P[48+e]=y,P[56+e]=y)}for(T=0;T<64;++T){const e=128+(P[T]+8>>4);t[T]=e<0?0:e>255?255:e}}for(let a=0;a<r;a++){const e=a<<3;for(let n=0;n<8;n++)t.push(new Uint8Array(o));for(let r=0;r<s;r++){p(n.blocks[a][r],d,b);let s=0;const o=r<<3;for(let n=0;n<8;n++){const r=t[e+n];for(let e=0;e<8;e++)r[o+e]=d[s++]}}}return t}class w{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(e){let n=0;function t(){const t=e[n]<<8|e[n+1];return n+=2,t}function s(){const s=t(),r=e.subarray(n,n+s-2);return n+=r.length,r}function r(e){let n,t,s=0,r=0;for(t in e.components)e.components.hasOwnProperty(t)&&(n=e.components[t],s<n.h&&(s=n.h),r<n.v&&(r=n.v));const o=Math.ceil(e.samplesPerLine/8/s),a=Math.ceil(e.scanLines/8/r);for(t in e.components)if(e.components.hasOwnProperty(t)){n=e.components[t];const i=Math.ceil(Math.ceil(e.samplesPerLine/8)*n.h/s),c=Math.ceil(Math.ceil(e.scanLines/8)*n.v/r),l=o*n.h,f=a*n.v,h=[];for(let e=0;e<f;e++){const e=[];for(let n=0;n<l;n++)e.push(new Int32Array(64));h.push(e)}n.blocksPerLine=i,n.blocksPerColumn=c,n.blocks=h}e.maxH=s,e.maxV=r,e.mcusPerLine=o,e.mcusPerColumn=a}let a=t();if(65496!==a)throw new Error("SOI not found");a=t();while(65497!==a){switch(a){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{const e=s();65504===a&&74===e[0]&&70===e[1]&&73===e[2]&&70===e[3]&&0===e[4]&&(this.jfif={version:{major:e[5],minor:e[6]},densityUnits:e[7],xDensity:e[8]<<8|e[9],yDensity:e[10]<<8|e[11],thumbWidth:e[12],thumbHeight:e[13],thumbData:e.subarray(14,14+3*e[12]*e[13])}),65518===a&&65===e[0]&&100===e[1]&&111===e[2]&&98===e[3]&&101===e[4]&&0===e[5]&&(this.adobe={version:e[6],flags0:e[7]<<8|e[8],flags1:e[9]<<8|e[10],transformCode:e[11]});break}case 65499:{const s=t(),r=s+n-2;while(n<r){const s=e[n++],r=new Int32Array(64);if(s>>4===0)for(let t=0;t<64;t++){const s=o[t];r[s]=e[n++]}else{if(s>>4!==1)throw new Error("DQT: invalid table spec");for(let e=0;e<64;e++){const n=o[e];r[n]=t()}}this.quantizationTables[15&s]=r}break}case 65472:case 65473:case 65474:{t();const s={extended:65473===a,progressive:65474===a,precision:e[n++],scanLines:t(),samplesPerLine:t(),components:{},componentsOrder:[]},o=e[n++];let i;for(let t=0;t<o;t++){i=e[n];const t=e[n+1]>>4,r=15&e[n+1],o=e[n+2];s.componentsOrder.push(i),s.components[i]={h:t,v:r,quantizationIdx:o},n+=3}r(s),this.frames.push(s);break}case 65476:{const s=t();for(let t=2;t<s;){const s=e[n++],r=new Uint8Array(16);let o=0;for(let t=0;t<16;t++,n++)r[t]=e[n],o+=r[t];const a=new Uint8Array(o);for(let t=0;t<o;t++,n++)a[t]=e[n];t+=17+o,s>>4===0?this.huffmanTablesDC[15&s]=b(r,a):this.huffmanTablesAC[15&s]=b(r,a)}break}case 65501:t(),this.resetInterval=t();break;case 65498:{t();const s=e[n++],r=[],o=this.frames[0];for(let t=0;t<s;t++){const t=o.components[e[n++]],s=e[n++];t.huffmanTableDC=this.huffmanTablesDC[s>>4],t.huffmanTableAC=this.huffmanTablesAC[15&s],r.push(t)}const a=e[n++],i=e[n++],c=e[n++],l=d(e,n,o,r,this.resetInterval,a,i,c>>4,15&c);n+=l;break}case 65535:255!==e[n]&&n--;break;default:if(255===e[n-3]&&e[n-2]>=192&&e[n-2]<=254){n-=3;break}throw new Error(`unknown JPEG marker ${a.toString(16)}`)}a=t()}}getResult(){const{frames:e}=this;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&r.warn("more than one frame is not supported");for(let r=0;r<this.frames.length;r++){const e=this.frames[r].components;for(const n of Object.keys(e))e[n].quantizationTable=this.quantizationTables[e[n].quantizationIdx],delete e[n].quantizationIdx}const n=e[0],{components:t,componentsOrder:s}=n,o=[],a=n.samplesPerLine,i=n.scanLines;for(let r=0;r<s.length;r++){const e=t[s[r]];o.push({lines:p(n,e),scaleX:e.h/n.maxH,scaleY:e.v/n.maxV})}const c=new Uint8Array(a*i*o.length);let l=0;for(let r=0;r<i;++r)for(let e=0;e<a;++e)for(let n=0;n<o.length;++n){const t=o[n];c[l]=t.lines[0|r*t.scaleY][0|e*t.scaleX],++l}return c}}class k extends s.Z{constructor(e){super(),this.reader=new w,e.JPEGTables&&this.reader.parse(e.JPEGTables)}decodeBlock(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}}}]);
//# sourceMappingURL=347.2b5990c2.js.map