(function(){var e={24101:function(e,t,r){"use strict";var i=r(20144),o=r(74480),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("MainPage")],1)},s=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app"},[r("b-tabs",[r("b-tab-item",{attrs:{label:"Position"}},[r("b-table",{attrs:{data:e.observations.positions,columns:e.columns.positions}})],1),r("b-tab-item",{attrs:{label:"Orientation"}},[r("b-table",{attrs:{data:e.observations.orientations,columns:e.columns.orientations}})],1),r("b-tab-item",{attrs:{label:"Velocity"}},[r("b-table",{attrs:{data:e.observations.positions,columns:e.columns.positions}})],1)],1),r("LoginModal",{attrs:{controller:e.controller}})],1)},d=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-modal",{attrs:{active:e.active,"has-modal-card":"","can-cancel":!1,"aria-role":"dialog","aria-label":"Solid Login","aria-modal":""}},[r("form",{attrs:{action:""},on:{submit:function(t){t.preventDefault(),e.login()}}},[r("div",{staticClass:"modal-card",staticStyle:{width:"100%"}},[r("header",{staticClass:"modal-card-head"},[r("p",{staticClass:"modal-card-title"},[e._v("Login to Solid Provider")])]),r("section",{staticClass:"modal-card-body"},[r("b-field",{attrs:{label:"Solid Issuer"}},[r("b-input",{attrs:{type:"url",placeholder:"Your Solid Issuer",required:""},model:{value:e.issuer,callback:function(t){e.issuer=t},expression:"issuer"}})],1)],1),r("footer",{staticClass:"modal-card-foot"},[r("b-button",{attrs:{label:"Login",type:"is-primary"},on:{click:e.login}})],1)])])])},p=[],u={name:"LoginModal",props:["controller"],data(){return{issuer:null,active:!0}},methods:{login(){this.controller.login(this.issuer)},isLoggedIn(){return!!this.controller&&this.controller.isLoggedIn}},mounted(){this.controller.once("ready",(()=>{this.active=!1}))}},c=u,g=r(1001),y=(0,g.Z)(c,l,p,!1,null,"071106ca",null),h=y.exports,m=(r(7780),r(72765)),f=r(80313),v=r(13294),b=r(38638),w=r(97365),S=r(44654);let P=class extends S.OD{constructor(...e){super(...e),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"comment",void 0),(0,m.Z)(this,"featureOfInterest",void 0)}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.label,language:"en"}}),(0,f.w6)("design:type",String)],P.prototype,"label",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.comment,language:"en"}}),(0,f.w6)("design:type",String)],P.prototype,"comment",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Nj.isPropertyOf,serializer:e=>w.DataFactory.namedNode(e),deserializer:e=>e.value}}),(0,f.w6)("design:type",String)],P.prototype,"featureOfInterest",void 0),P=(0,f.gn)([(0,v.iN)({rdf:{type:b.tZ.ObservableProperty}})],P);let _=class extends S.OD{constructor(...e){super(...e),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"comment",void 0),(0,m.Z)(this,"properties",[])}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.label,language:"en"}}),(0,f.w6)("design:type",String)],_.prototype,"label",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.comment,language:"en"}}),(0,f.w6)("design:type",String)],_.prototype,"comment",void 0),(0,f.gn)([(0,v.hZ)(P,{rdf:{predicate:b.Nj.hasProperty}}),(0,f.w6)("design:type",Array)],_.prototype,"properties",void 0),_=(0,f.gn)([(0,v.iN)({rdf:{type:b.tZ.FeatureOfInterest}})],_);let O=class extends S.OD{constructor(...e){super(...e),(0,m.Z)(this,"resultTime",void 0),(0,m.Z)(this,"featuresOfInterest",[]),(0,m.Z)(this,"observedProperties",[]),(0,m.Z)(this,"results",[]),(0,m.Z)(this,"usedProcedures",[])}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.tZ.resultTime,datatype:S.eF.dateTime}}),(0,f.w6)("design:type",Date)],O.prototype,"resultTime",void 0),(0,f.gn)([(0,v.hZ)(_,{rdf:{predicate:b.tZ.hasFeatureOfInterest}}),(0,f.w6)("design:type",Array)],O.prototype,"featuresOfInterest",void 0),(0,f.gn)([(0,v.hZ)(P,{rdf:{predicate:b.tZ.observedProperty}}),(0,f.w6)("design:type",Array)],O.prototype,"observedProperties",void 0),(0,f.gn)([(0,v.hZ)(Object,{rdf:{predicate:b.tZ.hasResult}}),(0,f.w6)("design:type",Array)],O.prototype,"results",void 0),(0,f.gn)([(0,v.hZ)(String,{rdf:{predicate:b.tZ.usedProcedure,serializer:e=>S.xZ.namedNode(e),deserializer:e=>e.value}}),(0,f.w6)("design:type",Array)],O.prototype,"usedProcedures",void 0),O=(0,f.gn)([(0,v.iN)({rdf:{type:b.tZ.Observation}})],O);let Z=class{constructor(){(0,m.Z)(this,"unit",void 0),(0,m.Z)(this,"numericValue",void 0)}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.wY.unit}}),(0,f.w6)("design:type",v.fb)],Z.prototype,"unit",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.wY.numericValue}}),(0,f.w6)("design:type",Number)],Z.prototype,"numericValue",void 0),Z=(0,f.gn)([(0,v.iN)({rdf:{type:b.wY.QuantityValue}})],Z);let I=class{constructor(){(0,m.Z)(this,"spatialAccuracy",void 0)}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.p7.hasSpatialAccuracy}}),(0,f.w6)("design:type",Z)],I.prototype,"spatialAccuracy",void 0),I=(0,f.gn)([(0,v.iN)({rdf:{type:b.p7.Geometry}})],I);let D=class extends I{constructor(...e){super(...e),(0,m.Z)(this,"latitude",void 0),(0,m.Z)(this,"longitude",void 0),(0,m.Z)(this,"altitude",void 0)}};D=(0,f.gn)([(0,v.iN)({rdf:{serializer:e=>({predicates:{[b.p7.asWKT]:[e.altitude?w.DataFactory.literal(`POINT Z(${e.longitude} ${e.latitude} ${e.altitude})`,w.DataFactory.namedNode(b.p7.wktLiteral)):w.DataFactory.literal(`POINT(${e.longitude} ${e.latitude})`,w.DataFactory.namedNode(b.p7.wktLiteral))],[b.p7.coordinateDimension]:[w.DataFactory.literal(e.altitude?3:2)],[b.p7.spatialDimension]:[w.DataFactory.literal(e.altitude?3:2)],[b.p7.dimension]:[w.DataFactory.literal(e.altitude?3:2)]}})}})],D);let L=class extends I{constructor(...e){super(...e),(0,m.Z)(this,"coords",[])}};L=(0,f.gn)([(0,v.iN)({rdf:{serializer:e=>({predicates:{[b.p7.asWKT]:[w.DataFactory.literal(`POLYGON Z((${e.coords.map((e=>`${e.longitude} ${e.latitude} ${e.altitude}`)).join(", ")}))`,w.DataFactory.namedNode(b.p7.wktLiteral))],[b.p7.coordinateDimension]:[w.DataFactory.literal(3)],[b.p7.spatialDimension]:[w.DataFactory.literal(3)],[b.p7.dimension]:[w.DataFactory.literal(3)]}})}})],L);let N=class extends S.OD{constructor(...e){super(...e),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"comment",void 0)}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.label,language:"en"}}),(0,f.w6)("design:type",String)],N.prototype,"label",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.comment,language:"en"}}),(0,f.w6)("design:type",String)],N.prototype,"comment",void 0),N=(0,f.gn)([(0,v.iN)({rdf:{type:b.tZ.Platform}})],N);let T=class{constructor(){(0,m.Z)(this,"street",void 0),(0,m.Z)(this,"country",void 0)}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.w_.street_address}}),(0,f.w6)("design:type",String)],T.prototype,"street",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.w_.country_name}}),(0,f.w6)("design:type",String)],T.prototype,"country",void 0),T=(0,f.gn)([(0,v.iN)({rdf:{type:b.w_.Address}})],T);var E=r(91233);let F=class extends E.OD{constructor(...e){super(...e),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"comment",void 0),(0,m.Z)(this,"platform",void 0),(0,m.Z)(this,"geometry",void 0),(0,m.Z)(this,"address",void 0),(0,m.Z)(this,"within",void 0)}};var q;(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.label,language:"en"}}),(0,f.w6)("design:type",String)],F.prototype,"label",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.comment,language:"en"}}),(0,f.w6)("design:type",String)],F.prototype,"comment",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Nj.deployedOnPlatform,language:"en"}}),(0,f.w6)("design:type",N)],F.prototype,"platform",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.p7.hasGeometry}}),(0,f.w6)("design:type",L)],F.prototype,"geometry",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.w_.hasAddress}}),(0,f.w6)("design:type",T)],F.prototype,"address",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.p7.sfWithin}}),(0,f.w6)("design:type",String)],F.prototype,"within",void 0),F=(0,f.gn)([(0,v.iN)({rdf:{type:[b.Nj.Deployment,b.p7.SpatialObject]}})],F);let R=q=class extends S.OD{constructor(...e){super(...e),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"comment",void 0),(0,m.Z)(this,"deployment",void 0),(0,m.Z)(this,"subSystems",[]),(0,m.Z)(this,"procedures",[])}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.label,language:"en"}}),(0,f.w6)("design:type",String)],R.prototype,"label",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.comment,language:"en"}}),(0,f.w6)("design:type",String)],R.prototype,"comment",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Nj.hasDeployment,language:"en"}}),(0,f.w6)("design:type",F)],R.prototype,"deployment",void 0),(0,f.gn)([(0,v.hZ)(q,{rdf:{predicate:b.Nj.hasSubSystem}}),(0,f.w6)("design:type",Array)],R.prototype,"subSystems",void 0),(0,f.gn)([(0,v.hZ)(q,{rdf:{predicate:b.Nj._implements}}),(0,f.w6)("design:type",Array)],R.prototype,"procedures",void 0),R=q=(0,f.gn)([(0,v.iN)({rdf:{type:b.Nj.System}})],R);let x=class extends S.OD{constructor(...e){super(...e),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"comment",void 0),(0,m.Z)(this,"forProperty",void 0),(0,m.Z)(this,"minValue",void 0),(0,m.Z)(this,"maxValue",void 0),(0,m.Z)(this,"unit",void 0)}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.label,language:"en"}}),(0,f.w6)("design:type",String)],x.prototype,"label",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.comment,language:"en"}}),(0,f.w6)("design:type",String)],x.prototype,"comment",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Nj.forProperty}}),(0,f.w6)("design:type",P)],x.prototype,"forProperty",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.fK.minValue}}),(0,f.w6)("design:type",Number)],x.prototype,"minValue",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.fK.maxValue}}),(0,f.w6)("design:type",Number)],x.prototype,"maxValue",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.fK.unitCode}}),(0,f.w6)("design:type",v.fb)],x.prototype,"unit",void 0),x=(0,f.gn)([(0,v.iN)({rdf:{type:b.gL.Accuracy}})],x);let A=class extends S.OD{constructor(...e){super(...e),(0,m.Z)(this,"label",void 0),(0,m.Z)(this,"comment",void 0)}};(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.label,language:"en"}}),(0,f.w6)("design:type",String)],A.prototype,"label",void 0),(0,f.gn)([(0,v._J)({rdf:{predicate:b.Zv.comment,language:"en"}}),(0,f.w6)("design:type",String)],A.prototype,"comment",void 0),A=(0,f.gn)([(0,v.iN)({rdf:{type:b.tZ.Procedure}})],A);var J=r(24408);const j=new J.Nc("PL9").setUID("deployment_pl9").setBounds({topLeft:new v.sX(50.8203726927966,4.392241309019189),width:46.275,height:37.27,rotation:-34.04}),$=new J.OR("PL9.3").setUID("deployment_pl9_3").setBuilding(j).setBounds([new v.Sb(0,0),new v.Sb(0,13.73),new v.Sb(10.102,13.73),new v.Sb(10.102,23.54),new v.Sb(0,23.54),new v.Sb(0,37.27),new v.Sb(44.33,37.27),new v.Sb(44.33,23.54),new v.Sb(28.06,23.54),new v.Sb(28.06,13.73),new v.Sb(44.33,13.73),new v.Sb(44.33,0)]).setFloorNumber(3),V=(new J.du("PL9.3.60").setUID("deployment_pl9_3_60").setFloor($).setBounds([new v.Sb(.57,31.25),new v.Sb(4.75,37.02)]),new J.du("PL9.3.58").setUID("deployment_pl9_3_58").setFloor($).setBounds([new v.Sb(4.75,31.25),new v.Sb(8.35,37.02)]),new J.du("PL9.3.56").setUID("deployment_pl9_3_56").setFloor($).setBounds([new v.Sb(8.35,31.25),new v.Sb(13.15,37.02)]),new J.du("PL9.3.32").setUID("deployment_pl9_3_32").setFloor($).setBounds([new v.Sb(29.97,31.25),new v.Sb(34.77,37.02)]),new J.du("PL9.3.54").setUID("deployment_pl9_3_54").setFloor($).setBounds([new v.Sb(13.15,31.25),new v.Sb(25.15,37.02)]),new J.du("PL9.3.62").setUID("deployment_pl9_3_62").setFloor($).setBounds([new v.Sb(27.55,24.105),new v.Sb(35.95,29.5)]),new J.CL("Corridor").setUID("deployment_pl9_3_corridor").setFloor($).setBounds([new v.Sb(2.39,6.015),new v.Sb(2.39,7.715),new v.Sb(18.015,7.715),new v.Sb(18.015,29.555),new v.Sb(2.39,29.555),new v.Sb(2.39,31.255),new v.Sb(41.94,31.255),new v.Sb(41.94,29.555),new v.Sb(20.315,29.555),new v.Sb(20.315,7.715),new v.Sb(41.94,7.715),new v.Sb(41.94,6.015)]),new J.ld("Lobby #1").setUID("deployment_pl9_3_lobby_1").setFloor($).setBounds([new v.Sb(20.315,20.155),new v.Sb(25.765,27.27)]),new J.ld("Lobby #2").setUID("deployment_pl9_3_lobby_2").setFloor($).setBounds([new v.Sb(18.015,.57),new v.Sb(20.315,6.015)]),new J.ld("Toilets #1").setUID("deployment_pl9_3_toilets_1").setFloor($).setBounds([new v.Sb(15.48,10.51),new v.Sb(18.015,12.71)]),new J.ld("Toilets #2").setUID("deployment_pl9_3_toilets_2").setFloor($).setBounds([new v.Sb(15.48,24.56),new v.Sb(18.015,26.76)]),new J.CL("Elevators").setUID("deployment_pl9_3_elevators").setFloor($).setBounds([new v.Sb(10.73,17.22),new v.Sb(18.02,20.06)]),new J.CL("Staircase").setUID("deployment_pl9_3_staircase").setFloor($).setBounds([new v.Sb(20.315,17.22),new v.Sb(27.56,20.06)]),"http://openhps.github.io/ipin2022-solid/tracking.ttl#");var B=r(66234),C=r(24574),U=r(75991),k=r(39223),M=r(10593),X=r(25108);const z=r(15515);class G extends M.EventEmitter{constructor(e){super(),(0,m.Z)(this,"service",void 0),(0,m.Z)(this,"session",void 0),(0,m.Z)(this,"me",void 0),(0,m.Z)(this,"positionProperty",void 0),(0,m.Z)(this,"orientationProperty",void 0),(0,m.Z)(this,"velocityProperty",void 0),(0,m.Z)(this,"driver",void 0),this.service=new B.pJ({clientName:e,dataServiceDriver:new k.w(String,{namespace:"example"}),restorePreviousSession:!0}),this.driver=new B.t6(v.Lo),this.service.emit("build"),this.service.on("login",(e=>{X.log(`Logged in ${e.info.webId}`),this.initialize()}))}get isLoggedIn(){return void 0!==this.session&&this.session.info.isLoggedIn}getPropertyURI(e,t){return this.service.getDocumentURL(e,`/properties/${t}.ttl`).href}async login(e){await this.service.login(e)}getSession(){return this.service.session}async initialize(){const e=this.getSession(),t=await this.service.getThing(e,e.info.webId),r=((0,U.gPA)(t,b.w_.fn)??(0,U.gPA)(t,b.ay.name)).value;this.me=new _(e.info.webId),this.positionProperty=new P(this.getPropertyURI(e,"position")),this.positionProperty.comment=`Geographical position of ${r}`,this.positionProperty.label="Geographical Position",this.positionProperty.featureOfInterest=this.me.value;const i=new x(this.getPropertyURI(e,"position")+"#accuracy");if(i.unit=v.MD.METER,i.minValue=-1,i.minValue=1,i.forProperty=this.positionProperty,i.label="Maximum accuracy",i.comment="The maximum accuracy for the geographical position",this.orientationProperty=new P(this.getPropertyURI(e,"orientation")),this.orientationProperty.comment=`Orientation of ${r}`,this.orientationProperty.label="Orientation",this.orientationProperty.featureOfInterest=this.me.value,this.velocityProperty=new P(this.getPropertyURI(e,"velocity")),this.velocityProperty.comment=`Velocity of ${r}`,this.velocityProperty.label="Velocity",this.velocityProperty.featureOfInterest=this.me.value,this.me.properties.push(this.positionProperty),this.me.properties.push(this.orientationProperty),this.me.properties.push(this.velocityProperty),t.predicates[b.Nj.hasProperty]||void 0===t)return X.log("Properties already exist!",this.me.id),void this.emit("ready");{const t=S.HW.serializeToSubjects(this.me);t.forEach((t=>{this.service.setThing(e,t)})),this.service.setThing(e,S.HW.serializeToSubjects(i)[0])}X.log("Created properties for",this.me.id),this.emit("ready")}async updatePosition(e){const t=this.getSession();void 0!==t&&(e.lnglat&&this.createPosition(t,e),e.heading&&this.createOrientation(t,e),e.speed&&this.createVelocity(t,e))}async findAllPositions(e,t,r=20){const i=await this.driver.queryBindingsSolid(`\n            PREFIX geosparql: <http://www.opengis.net/ont/geosparql#>\n            PREFIX geof: <http://www.opengis.net/def/function/geosparql/>\n            PREFIX ssn: <http://www.w3.org/ns/ssn/>\n            PREFIX sosa: <http://www.w3.org/ns/sosa/>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX qudt: <http://qudt.org/schema/qudt/>\n\n            SELECT ?posGeoJSON ?datetime ?accuracy ?procedureLabel {\n                ?profile a sosa:FeatureOfInterest ;\n                        ssn:hasProperty ?property .\n                ?observation sosa:hasResult ?result ;\n                            sosa:observedProperty ?property ;\n                            sosa:resultTime ?datetime .\n                OPTIONAL {\n                    ?observation sosa:usedProcedure ?procedure .\n                    ?procedure rdfs:label ?procedureLabel .\n                }\n                ?result a geosparql:Geometry ;\n                        geosparql:hasSpatialAccuracy ?spatialAccuracy ;\n                        geosparql:asWKT ?posWKT .\n                BIND(geof:asGeoJSON(?posWKT) AS ?posGeoJSON)\n                {\n                    ?spatialAccuracy qudt:numericValue ?value ;\n                                    qudt:unit ?unit .\n                    OPTIONAL { ?unit qudt:conversionMultiplier ?multiplier }\n                    OPTIONAL { ?unit qudt:conversionOffset ?offset }\n                    BIND(COALESCE(?multiplier, 1) as ?multiplier)\n                    BIND(COALESCE(?offset, 0) as ?offset)\n                    BIND(((?value * ?multiplier) + ?offset) AS ?accuracy)\n                    ${t?`FILTER(?accuracy <= ${t})`:""}\n                }\n            } ORDER BY DESC(?datetime) LIMIT ${r}\n        `,e,{httpProxyHandler:new C.ProxyHandlerStatic("https://proxy.linkeddatafragments.org/"),extensionFunctions:{"http://www.opengis.net/def/function/geosparql/asGeoJSON"(e){const t=e[0],r=/^<(https?:\/\/.*)>/g;let i=t.value.replace(r,"").replace("\n","").trim();const o=z.parse(i);return S.xZ.literal(JSON.stringify(o),b.p7.geoJSONLiteral)}}});return i.map((e=>{const t=JSON.parse(e.get("posGeoJSON").value);if(t){const r=t.coordinates;return{latlng:r.splice(0,2),altitude:3===r.length?r[2]:void 0,timestamp:Date.parse(e.get("datetime").value),accuracy:Number(e.get("accuracy").value),procedure:e.get("procedureLabel")?e.get("procedureLabel").value:void 0}}})).filter((e=>void 0!==e))}async findAllVelocities(e,t=20){const r=await this.driver.queryBindingsSolid(`\n            PREFIX ssn: <http://www.w3.org/ns/ssn/>\n            PREFIX sosa: <http://www.w3.org/ns/sosa/>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX qudt: <http://qudt.org/schema/qudt/>\n            PREFIX quantitykind: <http://qudt.org/vocab/quantitykind/>\n\n            SELECT ?speed ?datetime ?procedureLabel {\n                ?profile a sosa:FeatureOfInterest ;\n                        ssn:hasProperty ?property .\n                ?observation sosa:hasResult ?result ;\n                            sosa:observedProperty ?property ;\n                            sosa:resultTime ?datetime .\n                OPTIONAL {\n                    ?observation sosa:usedProcedure ?procedure .\n                    ?procedure rdfs:label ?procedureLabel .\n                }\n                ?result a qudt:QuantityValue ;\n                        qudt:unit ?unit ;\n                        qudt:numericValue ?speed .\n                { ?unit qudt:hasQuantityKind quantitykind:Velocity }\n                UNION\n                { ?unit qudt:hasQuantityKind quantitykind:Speed }\n            } ORDER BY DESC(?datetime) LIMIT ${t}\n        `,e,{httpProxyHandler:new C.ProxyHandlerStatic("https://proxy.linkeddatafragments.org/")});return r.map((e=>({speed:Number(e.get("speed").value),timestamp:Date.parse(e.get("datetime").value),procedure:e.get("procedureLabel")?e.get("procedureLabel").value:void 0}))).filter((e=>void 0!==e))}async findAllOrientations(e,t=20){const r=await this.driver.queryBindingsSolid(`\n            PREFIX ssn: <http://www.w3.org/ns/ssn/>\n            PREFIX sosa: <http://www.w3.org/ns/sosa/>\n            PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n            PREFIX qudt: <http://qudt.org/schema/qudt/>\n            PREFIX quantitykind: <http://qudt.org/vocab/quantitykind/>\n\n            SELECT ?heading ?datetime ?procedureLabel {\n                ?profile a sosa:FeatureOfInterest ;\n                        ssn:hasProperty ?property .\n                ?observation sosa:hasResult ?result ;\n                            sosa:observedProperty ?property ;\n                            sosa:resultTime ?datetime .\n                OPTIONAL {\n                    ?observation sosa:usedProcedure ?procedure .\n                    ?procedure rdfs:label ?procedureLabel .\n                }\n                ?result a qudt:QuantityValue ;\n                        qudt:unit ?unit ;\n                        qudt:numericValue ?heading .\n                ?unit qudt:hasQuantityKind quantitykind:Angle .\n            } ORDER BY DESC(?datetime) LIMIT ${t}\n        `,e,{httpProxyHandler:new C.ProxyHandlerStatic("https://proxy.linkeddatafragments.org/")});return r.map((e=>({heading:Number(e.get("heading").value),timestamp:Date.parse(e.get("datetime").value),procedure:e.get("procedureLabel")?e.get("procedureLabel").value:void 0}))).filter((e=>void 0!==e))}async createPosition(e,t){const r=new Date,i=new O(this.service.getDocumentURL(e,`/properties/position.ttl#${r.getTime()}`).href);i.featuresOfInterest.push(this.me),i.resultTime=r,i.observedProperties.push(this.positionProperty);const o=new Z;o.numericValue=t.accuracy,o.unit=v.MD.METER;const n=new D;n.latitude=t.lnglat[1],n.longitude=t.lnglat[0],n.altitude=t.altitude,n.spatialAccuracy=o,i.results.push(n),t.procedure&&i.usedProcedures.push(`${V}${t.procedure}`),await this.service.setThing(e,S.HW.serializeToSubjects(i)[0])}async createOrientation(e,t){const r=new Date,i=new O(this.service.getDocumentURL(e,`/properties/orientation.ttl#${r.getTime()}`).href);i.featuresOfInterest.push(this.me),i.resultTime=r,i.observedProperties.push(this.orientationProperty);const o=new Z;o.unit=v.KL.DEGREE,o.numericValue=t.heading,i.results.push(o),t.procedure&&i.usedProcedures.push(`${V}${t.procedure}`),await this.service.setThing(e,S.HW.serializeToSubjects(i)[0])}async createVelocity(e,t){const r=new Date,i=new O(this.service.getDocumentURL(e,`/properties/velocity.ttl#${r.getTime()}`).href);i.featuresOfInterest.push(this.me),i.resultTime=r,i.observedProperties.push(this.velocityProperty);const o=new Z;o.unit=v.hi.METER_PER_SECOND,o.numericValue=t.speed,i.results.push(o),t.procedure&&i.usedProcedures.push(`${V}${t.procedure}`),await this.service.setThing(e,S.HW.serializeToSubjects(i)[0])}}var H=r(25108),K={name:"MainPage",components:{LoginModal:h},data(){return{controller:null,columns:{positions:[{field:"datetime",label:"Date"},{field:"latitude",label:"Latitude"},{field:"longitude",label:"Longitude"},{field:"altitude",label:"Altitude"},{field:"accuracy",label:"Accuracy"},{field:"system",label:"System"}],orientations:[{field:"datetime",label:"Date"},{field:"heading",label:"Heading (degrees)"},{field:"system",label:"System"}],velocities:[{field:"datetime",label:"Date"},{field:"speed",label:"Speed"},{field:"system",label:"System"}]},observations:{positions:[],velocities:[],orientations:[]}}},beforeMount(){this.controller=new G("IPIN2022 Consumer Application")},mounted(){this.controller.once("ready",(()=>{this.loadOrientations(),this.loadPositions(),this.loadVelocities()}))},methods:{loadPositions(){this.controller.findAllPositions(this.controller.getSession(),50).then((e=>{this.observations.positions=e.map((e=>({datetime:new Date(e.timestamp).toTimeString(),longitude:e.latlng[0],latitude:e.latlng[1],altitude:e.altitude?e.altitude:"",accuracy:e.accuracy?e.accuracy+" m":"",system:e.procedure?e.procedure:""})))})).catch(H.error)},loadOrientations(){this.controller.findAllOrientations(this.controller.getSession(),50).then((e=>{this.observations.orientations=e.map((e=>({datetime:new Date(e.timestamp).toTimeString(),heading:e.heading,system:e.procedure?e.procedure:""})))})).catch(H.error)},loadVelocities(){this.controller.findAllVelocities(this.controller.getSession(),50).then((e=>{this.observations.velocities=e.map((e=>({datetime:new Date(e.timestamp).toTimeString(),speed:e.speed+" m/s",system:e.procedure?e.procedure:""})))})).catch(H.error)}}},W=K,Y=(0,g.Z)(W,a,d,!1,null,"0ee99a1a",null),Q=Y.exports,ee={name:"App",components:{MainPage:Q}},te=ee,re=(0,g.Z)(te,n,s,!1,null,null,null),ie=re.exports;i.Z.config.productionTip=!1,i.Z.use(o.ZP,{defaultIconPack:"fa"}),new i.Z({render:e=>e(ie)}).$mount("#app")},47412:function(){},47714:function(){},55843:function(){},95260:function(){},33587:function(){},60939:function(){},61324:function(){},81200:function(){},52361:function(){},94616:function(){}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,r.c=t,function(){var e=[];r.O=function(t,i,o,n){if(!i){var s=1/0;for(p=0;p<e.length;p++){i=e[p][0],o=e[p][1],n=e[p][2];for(var a=!0,d=0;d<i.length;d++)(!1&n||s>=n)&&Object.keys(r.O).every((function(e){return r.O[e](i[d])}))?i.splice(d--,1):(a=!1,n<s&&(s=n));if(a){e.splice(p--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[i,o,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(i,o){if(1&o&&(i=this(i)),8&o)return i;if("object"===typeof i&&i){if(4&o&&i.__esModule)return i;if(16&o&&"function"===typeof i.then)return i}var n=Object.create(null);r.r(n);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){s[e]=function(){return i[e]}}));return s["default"]=function(){return i},r.d(n,s),n}}(),function(){r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={826:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,n,s=i[0],a=i[1],d=i[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(d)var p=d(r)}for(t&&t(i);l<s.length;l++)n=s[l],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(p)},i=self["webpackChunkipin2022_consumer"]=self["webpackChunkipin2022_consumer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(r.s=24101)}));i=r.O(i)})();
//# sourceMappingURL=index.b5419b77.js.map